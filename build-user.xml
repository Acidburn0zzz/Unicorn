<property name="app.name" value="unicorn"/>
<property name="jar.file" value="${app.name}.jar"/>
<property name="war.file" value="${app.name}.war"/>

<target name="help">
    <echo message="Please run: $ ant -v -projecthelp"/>
</target>

<target name="remoteConfiguration"  depends="build" description="Workspace configuration for remote">
	<copy file="./org/w3c/unicorn/util/remote-unicorn.properties"
        tofile="./build/org/w3c/unicorn/util/unicorn.properties"
        overwrite="true"/>
	<copy file="./remote_log4j.xml"
        tofile="./build/log4j.xml"
        overwrite="true"/>
	<copy file="./org/w3c/unicorn/extensions.properties"
        tofile="./build/org/w3c/unicorn/extensions.properties" 
        overwrite="true"/>
	<copy file="./org/w3c/unicorn/responseParsers.properties"
        tofile="./build/org/w3c/unicorn/responseParsers.properties" 
        overwrite="true"/>
	<copy file="./org/w3c/unicorn/output/specialFormaters.properties" 
        tofile="./build/org/w3c/unicorn/output/specialFormaters.properties"
        overwrite="true"/>
</target>

<target name="localConfiguration" depends="war" >
	<copy file="./org/w3c/unicorn/util/local-unicorn.properties" 
        tofile="./build/org/w3c/unicorn/util/unicorn.properties"
        overwrite="true"/>
	<copy file="./log4j.xml" tofile="./build/log4j.xml" overwrite="true"/>
	<copy file="./org/w3c/unicorn/extensions.properties" 
        tofile="./build/org/w3c/unicorn/extensions.properties" 
        overwrite="true"/>
	<copy file="./org/w3c/unicorn/responseParsers.properties"
        tofile="./build/org/w3c/unicorn/responseParsers.properties" 
        overwrite="true"/>
	<copy file="./org/w3c/unicorn/output/specialFormaters.properties" 
        tofile="./build/org/w3c/unicorn/output/specialFormaters.properties" 
        overwrite="true"/>
</target>

<target name="make-war" depends="build" description="Creates the webapp module">
    <delete file="${war.file}"/>
    <war warfile="${war.file}" webxml="web.xml" basedir="." excludes="*,**">
        <classes dir="build">
            <include name="org/**"/>
        </classes>
        <classes dir=".">
            <exclude name="build/**"/>
            <include name="build/**/*.properties"/>
        </classes>
        <classes file="./build/log4j.xml"/>
        <webinf dir=".">
            <include name="uploaded-files/**"/>
            <include name="logs/**"/>
        </webinf>
        <lib dir="lib"/>
        <zipfileset dir="images" prefix="images"/>
        <zipfileset dir="style" prefix="style"/>
        <zipfileset dir="resources" prefix="WEB-INF/resources"/>
        <zipfileset dir="tabtastic" prefix="tabtastic"/>
        <zipfileset dir="temporary_files" prefix="temporary_files"/>
        <!--<zipfileset dir="resources/schemas" prefix="schemas"/>-->
    </war>
</target>

<target name="war" depends="remoteConfiguration,make-war" />

<target name="jar" depends="build" description="Creates the unicorn library">
	<delete file="${jar.file}" />
	<jar destfile="${jar.file}">
		<fileset dir="build">
			<include name="org/**/*.class" />
			<include name="**/*.properties" />
			<include name="log4j.xml" />
		</fileset>
		<fileset dir=".">
			<include name="org/**/*.java" />
		</fileset>
	</jar>
</target>
