<?xml version="1.0" ?>
<tasklist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.w3.org/unicorn/tasklist ../schemas/tasklist-schema.xsd"
 xmlns="http://www.w3.org/unicorn/tasklist">
	
	<task id="conformance">
    
    <conds>
      <cond id="markup-valid" result="passed" observer="markup-validator" type="xpath">
        <value>//passed = 'true'</value>
      </cond>
      
      <cond id="is-html" result="passed" type="mimetype">
        <value>text/html</value>
      </cond>
      <cond id="is-css" result="passed" type="mimetype">
        <value>text/css</value>
      </cond>
    </conds>
    <!--
    <cond id="mathml" result="passed"  type="mimetype">
      <value>application/mathml+xml</value>
    </cond>
    <cond id="smil" result="passed"  type="mimetype">
      <value>application/smil+xml</value>
    </cond>

    <cond id="svg" result="passed" type="mimetype">
      <value>image/svg+xml</value>
    </cond>
    <cond id="xhtml" result="passed" type="mimetype">
      <value>application/xhtml+xml</value>
    </cond>
    -->

    <routine>
      <if test="is-css">
        <then>
          <exec id="css" value="css-validator" type="observation"/>
        </then>
        <else>
          <exec id="markup" value="markup-validator" type="observation"/>
          <if test="markup-valid">
            <then>
              <if test="is-html">
                <then>
                  <exec id="appc" value="appc-checker" type="observation"/>
                </then>
              </if>
              <exec id="css" value="css-validator" type="observation"/>
            </then>
          </if>
        </else>
      </if>
    </routine>

		<outputseq>
			<outputgroup id="1">
				<tasksort>markup</tasksort>
				<tasksort>appc</tasksort>
			</outputgroup>
      <outputgroup id="2">
				<tasksort>css</tasksort>
			</outputgroup>
		</outputseq>

		
	</task>	
	
</tasklist>
